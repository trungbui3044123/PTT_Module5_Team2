<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>User Details</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        padding: 30px;
      }

      .profile-container {
        max-width: 500px;
        margin: auto;
      }

      h2 {
        text-align: center;
        margin-bottom: 20px;
      }

      .profile-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .profile-row {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px solid #eee;
      }

      .profile-row:last-child {
        border-bottom: none;
      }

      .label {
        font-weight: bold;
        color: #333;
      }
    </style>
  </head>
  <body>
    <div class="profile-container">
    <div></div><button id="homePage">Back Home page</button></div>
      <h2>Thông tin người dùng</h2>

      <div class="profile-card">
        <div class="profile-row">
          <span class="label">ID:</span> <span id="id"></span>
        </div>
        <div class="profile-row">
          <span class="label">Username:</span> <span id="username"></span>
        </div>
        <div class="profile-row">
          <span class="label">Email:</span> <span id="email"></span>
        </div>
        <div class="profile-row">
          <span class="label">Phone:</span> <span id="phone"></span>
        </div>
        <div class="profile-row">
          <span class="label">Name:</span> <span id="name"></span>
        </div>
        <div class="profile-row">
          <span class="label">Age:</span> <span id="age"></span>
        </div>
        <div class="profile-row">
          <span class="label">Address:</span> <span id="address"></span>
        </div>
        <div class="profile-row">
          <span class="label">Role:</span> <span id="role"></span>
        </div>
        <div class="profile-row">
          <span class="label">Status:</span> <span id="status"></span>
        </div>
        <div class="profile-row">
          <span class="label">Salary:</span> <span id="salary"></span>
        </div>
      </div>
    </div>

    <script>
      const token = localStorage.getItem("token");

      if (!token) {
        window.location.href =
          "http://127.0.0.1:5500/Fe/Pages/Others/OthersLogin.html";
      }
      function renderUserDetails(data) {
        document.getElementById("id").textContent = data.id;
        document.getElementById("username").textContent = data.username;
        document.getElementById("email").textContent = data.email;
        document.getElementById("phone").textContent = data.phone;
        document.getElementById("name").textContent = data.name;
        document.getElementById("age").textContent = data.age;
        document.getElementById("address").textContent = data.address;
        document.getElementById("role").textContent = data.role;
        document.getElementById("status").textContent = data.status;
        document.getElementById("salary").textContent =
          data.role === "STAFF" ? data.salary : "-";
      }
      fetch("http://localhost:8080/api/user/profile",{
            method: "GET",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer " + token
            }})
    .then(res=>res.json())          
    .then(result=>{
        if(result.status===200){
            console.log(result.data)
        renderUserDetails(result.data);

        }else{
            const error=document.createElement("h3");
            const divError= document.getElementsByClassName(".profile-card");
            error.innerHTML = "No data ";
            divError.appendChild(error);
        }

    })
document.getElementById("homePage").addEventListener("click",function(e){
    e.preventDefault();
   window.location.href = "http://127.0.0.1:5500/Fe/";
})

    </script>
  </body>
</html>
